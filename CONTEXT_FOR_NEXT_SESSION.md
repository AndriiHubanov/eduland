# CONTEXT_FOR_NEXT_SESSION ‚Äî Eduland Game

> –û—Å—Ç–∞–Ω–Ω—î –æ–Ω–æ–≤–ª–µ–Ω–Ω—è: 2026-02-28
> –ê–∫—Ç–∏–≤–Ω–∞ –≥—ñ–ª–∫–∞: `claude/fix-firebase-offline-error-3GqjH`

---

## –©–æ–± —à–≤–∏–¥–∫–æ –ø—Ä–æ–¥–æ–≤–∂–∏—Ç–∏ –≤ –Ω–æ–≤–æ–º—É —á–∞—Ç—ñ

> "–Ø —Ä–æ–∑—Ä–æ–±–ª—è—é –Ω–∞–≤—á–∞–ª—å–Ω—É –≥—Ä—É Eduland –Ω–∞ React + Firebase. –ü—Ä–æ—á–∏—Ç–∞–π —Ñ–∞–π–ª CONTEXT_FOR_NEXT_SESSION.md —É –∫–æ—Ä–µ–Ω—ñ –ø—Ä–æ—î–∫—Ç—É ‚Äî —Ç–∞–º –ø–æ–≤–Ω–∏–π —Å—Ç–∞—Ç—É—Å —â–æ –∑—Ä–æ–±–ª–µ–Ω–æ —ñ —â–æ —Ç—Ä–µ–±–∞ –∑—Ä–æ–±–∏—Ç–∏ –¥–∞–ª—ñ."

---

## –°—Ç–∞—Ç—É—Å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—Ö —Ñ–∞–∑

| –§–∞–∑–∞ | –û–ø–∏—Å | –°—Ç–∞—Ç—É—Å |
|------|------|--------|
| 1-8  | –ë–∞–∑–æ–≤–∞ –≥—Ä–∞: –≥–µ—Ä–æ–π, —Ä–µ—Å—É—Ä—Å–∏, –∑–∞–º–æ–∫, –∞—Ä–º—ñ—è, —Ç–æ—Ä–≥—ñ–≤–ª—è | ‚úÖ –ó—Ä–æ–±–ª–µ–Ω–æ |
| 9    | 31 –ø–æ–ª–µ –Ω–∞ –∫–∞—Ä—Ç—ñ, —Å–∏—Å—Ç–µ–º–∞ –º—ñ—Å—ñ–π (—Ä–æ–∑–≤—ñ–¥–∫–∞/–≤–∏–¥–æ–±—É—Ç–æ–∫/—à—Ç—É—Ä–º) | ‚úÖ –ó—Ä–æ–±–ª–µ–Ω–æ |
| 10   | –õ–∞–±–æ—Ä–∞—Ç–æ—Ä—ñ—ó –¥–ª—è –ø–æ–ª—ñ–≤ (–≥–µ–æ–ª–∞–±, —Å—Ç–∞–Ω—Ü—ñ—è, —à—Ç—É—Ä–º. –±–∞–∑–∞, —Å–∏–≥–Ω. –≤–µ–∂–∞) | ‚úÖ –ó—Ä–æ–±–ª–µ–Ω–æ |
| 11   | –ë–æ–π–æ–≤–∏–π –µ–∫—Ä–∞–Ω, —Ä—É—ó–Ω–∏, –∞—Ä–º—ñ—è —É WorldMap | ‚úÖ –ó—Ä–æ–±–ª–µ–Ω–æ |
| 12   | –ë–∞–ª–∞–Ω—Å, polish, –¥—Ä—ñ–±–Ω—ñ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è | ‚úÖ –ó—Ä–æ–±–ª–µ–Ω–æ |
| Fix  | Firebase offline error ‚Äî Admin –ø–∞–Ω–µ–ª—å –±–µ–∑–∫—ñ–Ω–µ—á–Ω–∏–π —Å–ø—ñ–Ω–Ω–µ—Ä | ‚úÖ –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ |
| 13   | **–í—ñ–∑—É–∞–ª—å–Ω–µ –º—ñ—Å—Ç–æ** ‚Äî 7√ó7 CSS grid, –ø–æ—Å—Ç–∞–ø–æ–∫ —Å—Ç–∏–ª—å, BuildingDetailPanel | ‚úÖ –ó—Ä–æ–±–ª–µ–Ω–æ |
| 14   | **–í—ñ–∑—É–∞–ª—å–Ω–∞ –∫–∞—Ä—Ç–∞** ‚Äî 800√ó800 terrain map, SVG —Ä—ñ—á–∫–∏, FieldMarker/CityMarker | ‚úÖ –ó—Ä–æ–±–ª–µ–Ω–æ |
| 15   | **Admin polish** ‚Äî —Ç–∞–±–ª–∏—Ü—è –≥—Ä–∞–≤—Ü—ñ–≤, CSV export, lazy loading | ‚úÖ –ó—Ä–æ–±–ª–µ–Ω–æ |
| 16   | **–ì—Ä–∞—Ñ—ñ–∫–∞ + –í—ñ–∫—ñ** ‚Äî GameImage fallback, –ø–∞–ø–∫–∏ assets/, –≤—ñ–∫—ñ –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç—ñ–≤ | ‚úÖ –ó—Ä–æ–±–ª–µ–Ω–æ |

---

## –ù–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏

### –§–∞–∑–∞ 16 ‚Äî ‚úÖ –ó–†–û–ë–õ–ï–ù–û
- `public/assets/` —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫ —Å—Ç–≤–æ—Ä–µ–Ω–∞
- `src/config/assets.js` ‚Äî —Ü–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ —à–ª—è—Ö–∏ (`buildingImg`, `unitImg`, `heroImg`, `fieldImg`)
- `src/components/GameImage.jsx` ‚Äî `<img>` –∑ emoji-fallback –∫–æ–ª–∏ PNG –≤—ñ–¥—Å—É—Ç–Ω—ñ–π
- CityGrid, WorldMap FieldMarker, HeroCreate ‚Äî –ø—ñ–¥–∫–ª—é—á–µ–Ω—ñ –¥–æ GameImage
- `/wiki` ‚Äî –≤—ñ–∫—ñ –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç—ñ–≤ (—Ä–µ—Å—É—Ä—Å–∏, –≥–µ—Ä–æ—ó, –±—É–¥—ñ–≤–ª—ñ, –∫–∞—Ä—Ç–∞, –∞—Ä–º—ñ—è, –ø—Ä–æ–≥—Ä–µ—Å, –ø–æ—Ä–∞–¥–∏) + JSON AI-–∫–æ–Ω—Ç–µ–∫—Å—Ç
- –ü–æ—Å–∏–ª–∞–Ω–Ω—è [–í–Ü–ö–Ü] –Ω–∞ Landing page

### –ù–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏
- **–î–æ–¥–∞—Ç–∏ —Ä–µ–∞–ª—å–Ω—ñ PNG** —É `public/assets/` (–ø—Ä–æ–º–ø—Ç —É `GRAPHICS_PROMPT.md`)
- –Ø–∫—â–æ —î BattleScreen —é–Ω—ñ—Ç–∏ emoji ‚Äî –∑–∞–º—ñ–Ω–∏—Ç–∏ —á–µ—Ä–µ–∑ `<GameImage src={unitImg(id)} fallback={unit.icon} />`

---

## –ö–ª—é—á–æ–≤—ñ —Ñ–∞–π–ª–∏

| –§–∞–π–ª | –†–æ–ª—å |
|------|------|
| `src/components/CityGrid.jsx` | **–ù–û–í–ò–ô** ‚Äî 7√ó7 –≤—ñ–∑—É–∞–ª—å–Ω–µ –º—ñ—Å—Ç–æ (–§–∞–∑–∞ 13) |
| `src/pages/City.jsx` | –°—Ç–æ—Ä—ñ–Ω–∫–∞ –º—ñ—Å—Ç–∞ ‚Äî –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î CityGrid |
| `src/pages/WorldMap.jsx` | **–ü–û–í–ù–Ü–°–¢–Æ –ü–ï–†–ï–†–û–ë–õ–ï–ù–ò–ô** ‚Äî terrain map (–§–∞–∑–∞ 14) |
| `src/pages/Admin.jsx` | –ê–¥–º—ñ–Ω: 8 –≤–∫–ª–∞–¥–æ–∫ + –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–∏–π Firebase + table/CSV (–§–∞–∑–∞ 15) |
| `src/App.jsx` | –†–æ—É—Ç–∏–Ω–≥ –∑ lazy loading (–§–∞–∑–∞ 15) |
| `src/config/fields.js` | 31 –ø–æ–ª–µ: —Ç–∏–ø–∏, —Ç–∏—Ä–∏, —ñ–∫–æ–Ω–∫–∏ |
| `src/config/labs.js` | –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ñ –±—É–¥—ñ–≤–ª—ñ (–≥–µ–æ–ª–∞–±, —Å—Ç–∞–Ω—Ü—ñ—è, —à—Ç—É—Ä–º. –±–∞–∑–∞, —Å–∏–≥–Ω. –≤–µ–∂–∞) |
| `src/firebase/service.js` | –û—Å–Ω–æ–≤–Ω–∏–π —Å–µ—Ä–≤—ñ—Å: –±—É–¥—ñ–≤–ª—ñ, –≥—Ä–∞–≤—Ü—ñ, tasks |
| `src/firebase/unitService.js` | 8 —é–Ω—ñ—Ç—ñ–≤: —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, —Ä–µ–∫—Ä—É—Ç–∏–Ω–≥ |
| `src/store/gameStore.js` | HERO_CLASSES (4 –∫–ª–∞—Å–∏), RESOURCE_ICONS |

---

## –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –∫–∞—Ä—Ç–∏ (–§–∞–∑–∞ 14)

```js
// WorldMap.jsx
const MAP_SIZE  = 800          // 800√ó800px
const CELL_SIZE = 80           // cityPosition {x:0-9, y:0-9} ‚Üí –ø—ñ–∫—Å–µ–ª—ñ
const FIELD_POSITIONS = [      // 31 —Ñ—ñ–∫—Å–æ–≤–∞–Ω–∏—Ö [x, y] –¥–ª—è –ø–æ–ª—ñ–≤ –ø–æ field.index
  [100,  80], [250, 65], ... // 0-4
  // ... (31 –ø–æ–∑–∏—Ü—ñ—è)
]

// CityMarker: (cityPosition.x + 0.5) * 80, (cityPosition.y + 0.5) * 80
// FieldMarker: FIELD_POSITIONS[field.index], opacity 0.15 if filtered out
// SVG rivers: main diagonal + tributary + northern branch
```

---

## –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –º—ñ—Å—Ç–∞ (–§–∞–∑–∞ 13)

```js
// CityGrid.jsx
const GRID = 7    // 7√ó7 —Å—ñ—Ç–∫–∞
const BUILDING_POS = {
  server:   { row: 1, col: 1 },
  lab:      { row: 1, col: 5 },
  firewall: { row: 3, col: 1 },
  tower:    { row: 6, col: 1 },
  archive:  { row: 6, col: 5 },
}
const CASTLE = { row: 3, col: 3 }  // 2√ó2: rows 3-4, cols 3-4
// PATH_CELLS, DECOR ‚Äî –¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω—ñ –µ–ª–µ–º–µ–Ω—Ç–∏
// Click ‚Üí BuildingDetailPanel (production, workers, upgrade)
// Castle click ‚Üí "–î–∏–≤–∏—Å—å –ó–ê–ú–û–ö —Å–µ–∫—Ü—ñ—é –Ω–∏–∂—á–µ"
```

---

## –ë—É–¥—ñ–≤–ª—ñ –≤ –≥—Ä—ñ (–¥–ª—è –≥—Ä–∞—Ñ—ñ–∫–∏ —Ñ–∞–∑–∏ 16)

### –ú—ñ—Å—Ç–æ (–Ω–∞ —Å—ñ—Ç—Ü—ñ)
- `castle` ‚Äî –ó–∞–º–æ–∫ (2√ó2, —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞)
- `server` ‚Äî –°–µ—Ä–≤–µ—Ä
- `lab` ‚Äî –õ–∞–±–æ—Ä–∞—Ç–æ—Ä—ñ—è
- `tower` ‚Äî –í–µ–∂–∞ –∑–≤'—è–∑–∫—É
- `archive` ‚Äî –°—Ö–æ–≤–∏—â–µ –¥–∞–Ω–∏—Ö
- `firewall` ‚Äî –ë—Ä–∞–Ω–¥–º–∞—É–µ—Ä

### –î–∏—Å—Ü–∏–ø–ª—ñ–Ω–∞—Ä–Ω—ñ (–≤–∏—Ä–æ–±–Ω–∏—á—ñ, –ø–æ–∑–∞ —Å—ñ—Ç–∫–æ—é)
- `greenhouse` ‚Äî –¢–µ–ø–ª–∏—Ü—è (–ø—Ä–∏—Ä–æ–¥–Ω. –Ω–∞—É–∫–∏)
- `reactor` ‚Äî –†–µ–∞–∫—Ç–æ—Ä (–ø—Ä–∏—Ä–æ–¥–Ω. –Ω–∞—É–∫–∏)
- `biolab` ‚Äî –ë—ñ–æ–ª–∞–±–æ—Ä–∞—Ç–æ—Ä—ñ—è (–ø—Ä–∏—Ä–æ–¥–Ω. –Ω–∞—É–∫–∏)
- `solar_array` ‚Äî –°–æ–Ω—è—á–Ω–∞ –±–∞—Ç–∞—Ä–µ—è (–ø—Ä–∏—Ä–æ–¥–Ω. –Ω–∞—É–∫–∏)

### –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ñ (–¥–ª—è –º—ñ—Å—ñ–π –Ω–∞ –∫–∞—Ä—Ç—ñ)
- `geolab` ‚Äî –ì–µ–æ–ª–∞–±
- `extraction_station` ‚Äî –ï–∫—Å—Ç—Ä–∞–∫—Ü—ñ–π–Ω–∞ —Å—Ç–∞–Ω—Ü—ñ—è
- `assault_base` ‚Äî –®—Ç—É—Ä–º–æ–≤–∞ –±–∞–∑–∞
- `signal_tower` ‚Äî –°–∏–≥–Ω–∞–ª—å–Ω–∞ –≤–µ–∂–∞

---

## –Æ–Ω—ñ—Ç–∏

| ID | –ù–∞–∑–≤–∞ | –¢–∏–ø |
|----|-------|-----|
| `scout_drone` | –î—Ä–æ–Ω-—Ä–æ–∑–≤—ñ–¥–Ω–∏–∫ | dps |
| `shieldbot` | –©–∏—Ç–æ–±–æ—Ç | tank |
| `hacker_spider` | –•–∞–∫–µ—Ä-–ø–∞–≤—É–∫ | dps |
| `medic_module` | –ú–µ–¥–∏–∫-–º–æ–¥—É–ª—å | support |
| `siege_mech` | –û—Å–∞–¥–Ω–∏–π –º–µ—Ö | tank |
| `guardian_core` | –Ø–¥—Ä–æ –°—Ç—Ä–∞–∂—ñ–≤ | support |
| `code_phantom` | –ö–æ–¥-–§–∞–Ω—Ç–æ–º | dps |
| `relay_tower` | –†–µ—Ç—Ä–∞–Ω—Å–ª—è—Ü—ñ–π–Ω–∞ –≤–µ–∂–∞ | support |

---

## –ö–ª–∞—Å–∏ –≥–µ—Ä–æ—ó–≤

| ID | –ù–∞–∑–≤–∞ | –ë–æ–Ω—É—Å |
|----|-------|-------|
| `guardian` | –°—Ç—Ä–∞–∂ | +3 –í–∏—Ç—Ä–∏–≤–∞–ª—ñ—Å—Ç—å, +10% bits |
| `archivist` | –ê—Ä—Ö—ñ–≤–∞—Ä—ñ—É—Å | +3 –Ü–Ω—Ç–µ–ª–µ–∫—Ç, +10% code |
| `detective` | –î–µ—Ç–µ–∫—Ç–∏–≤ | +2 –Ü–Ω—Ç–µ–ª–µ–∫—Ç +1 –•–∞—Ä–∏–∑–º–∞, +15% bits |
| `coordinator` | –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä | +3 –•–∞—Ä–∏–∑–º–∞, +15% gold |

---

## –¢–∏–ø–∏ –ø–æ–ª—ñ–≤ (WorldMap markers)

| –¢–∏–ø | –¢–∏—Ä | –ö–æ–ª—ñ—Ä |
|-----|-----|-------|
| energy | 1-2 | #ffaa00 |
| bio | 1-3 | #00ff88 |
| crystal | 1-2 | #00ffff |
| bits | 1-2 | #00aaff |
| code | 1 | #8888ff |
| gold | 2 | #ffd700 |
| ruin | T1 üèöÔ∏è | #00ff88 |
| ruin | T2 üèóÔ∏è | #ffd700 |
| ruin | T3 üè∞ | #ff4500 |
| neutral | ‚Äî | #444 |

---

## Git

```
Branch: claude/fix-firebase-offline-error-3GqjH
Commits: Admin fix ‚Üí Phase 13 ‚Üí Phase 14 ‚Üí Phase 15
Build: ‚úÖ (566KB main + lazy chunks)
```
