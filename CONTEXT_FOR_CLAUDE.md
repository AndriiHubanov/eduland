# Eduland ‚Äî –ö–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è –Ω–æ–≤–æ–≥–æ —á–∞—Ç—É Claude

## –©–æ —Ü–µ –∑–∞ –ø—Ä–æ—î–∫—Ç

**Eduland** ‚Äî –±—Ä–∞—É–∑–µ—Ä–Ω–∞ –≥—Ä–∞ –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç—ñ–≤ –Ω–∞ –ø–∞—Ä–∞—Ö. –í–∏–∫–ª–∞–¥–∞—á –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —ó—ó —è–∫ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –≥–µ–π–º—ñ—Ñ—ñ–∫–∞—Ü—ñ—ó –Ω–∞–≤—á–∞–Ω–Ω—è. –°—Ç—É–¥–µ–Ω—Ç–∏ –±—É–¥—É—é—Ç—å –º—ñ—Å—Ç–æ, –≤–∏–∫–æ–Ω—É—é—Ç—å –∑–∞–≤–¥–∞–Ω–Ω—è, —Ç–æ—Ä–≥—É—é—Ç—å —Ä–µ—Å—É—Ä—Å–∞–º–∏ —Ç–∞ –∑–º–∞–≥–∞—é—Ç—å—Å—è –≤ —Ä–µ–π—Ç–∏–Ω–≥—É –≥—Ä—É–ø–∏.

**–¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—á–Ω–∏–π —Å—Ç–µ–∫:**
- React 18 + Vite 5, Tailwind CSS 3, Zustand, React Router v6, Firebase 10
- –¢—ñ–ª—å–∫–∏ JavaScript (–±–µ–∑ TypeScript)
- Firebase Firestore —è–∫ –±–∞–∑–∞ –¥–∞–Ω–∏—Ö (–∫–ª—ñ—î–Ω—Ç-—Å–∞–π–¥, –±–µ–∑ Cloud Functions)

**–î–∏–∑–∞–π–Ω:** –ø–æ—Å—Ç-–∞–ø–æ–∫–∞–ª—ñ–ø—Ç–∏—á–Ω–∞ —Ç–µ–º–∞, —à—Ä–∏—Ñ—Ç–∏ Bebas Neue + Share Tech Mono + Rajdhani
CSS-–∑–º—ñ–Ω–Ω—ñ: `--bg`, `--bg2`, `--bg3`, `--card`, `--border`, `--accent(#ff4500)`, `--neon(#00ff88)`, `--gold`, `--info`, `--text`

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ—î–∫—Ç—É

```
src/
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ BattleScreen.jsx   ‚Äî –ê–Ω—ñ–º–æ–≤–∞–Ω–∏–π –µ–∫—Ä–∞–Ω –±–æ—é (—Ä–∞—É–Ω–¥–∏ ‚Üí —Ä–µ–∑—É–ª—å—Ç–∞—Ç)   ‚Üê –§–ê–ó–ê 8
‚îÇ   ‚îú‚îÄ‚îÄ BuildingCard.jsx   ‚Äî –ö–∞—Ä—Ç–∫–∞ –±—É–¥—ñ–≤–ª—ñ (—Ä—ñ–≤–µ–Ω—å, —Ä–æ–±—ñ—Ç–Ω–∏–∫–∏, –∞–ø–≥—Ä–µ–π–¥)
‚îÇ   ‚îú‚îÄ‚îÄ CastlePanel.jsx    ‚Äî –ó–∞–º–æ–∫: –∞–ø–≥—Ä–µ–π–¥, –±–æ–Ω—É—Å–∏, –ª—ñ–º—ñ—Ç —é–Ω—ñ—Ç—ñ–≤        ‚Üê –§–ê–ó–ê 8
‚îÇ   ‚îú‚îÄ‚îÄ CompletionCard.jsx ‚Äî –ö–∞—Ä—Ç–∫–∞ –≤–∏–∫–æ–Ω–∞–Ω–æ–≥–æ –∑–∞–≤–¥–∞–Ω–Ω—è
‚îÇ   ‚îú‚îÄ‚îÄ MiningGrid.jsx     ‚Äî –°—ñ—Ç–∫–∞ –º—ñ—Å—Ç–∞ 6√ó5 (–±—É–¥—ñ–≤–ª—ñ + –≤–∏–¥–æ–±—É—Ç–æ–∫)       ‚Üê –§–ê–ó–ê 7
‚îÇ   ‚îú‚îÄ‚îÄ MissionsPanel.jsx  ‚Äî –ú—ñ—Å—ñ—ó (—â–æ–¥–µ–Ω–Ω—ñ/—Ç–∏–∂–Ω–µ–≤—ñ/—Å—é–∂–µ—Ç/–¥–æ—Å—è–≥–Ω–µ–Ω–Ω—è)    ‚Üê –§–ê–ó–ê 8
‚îÇ   ‚îú‚îÄ‚îÄ UnitsPanel.jsx     ‚Äî –Æ–Ω—ñ—Ç–∏: –Ω–∞–π–º, –∞–ø–≥—Ä–µ–π–¥, —Ñ–æ—Ä–º—É–≤–∞–Ω–Ω—è –∞—Ä–º—ñ—ó       ‚Üê –§–ê–ó–ê 8
‚îÇ   ‚îî‚îÄ‚îÄ UI.jsx             ‚Äî ResourceBar, XPBar, Spinner, Card, BottomNav —Ç–æ—â–æ
‚îú‚îÄ‚îÄ firebase/
‚îÇ   ‚îú‚îÄ‚îÄ adminService.js    ‚Äî –û–ø–µ—Ä–∞—Ü—ñ—ó —Ç—ñ–ª—å–∫–∏ –¥–ª—è –∞–¥–º—ñ–Ω–∞
‚îÇ   ‚îú‚îÄ‚îÄ battleService.js   ‚Äî –°–∏–º—É–ª—è—Ü—ñ—è –±–æ—é (ATK/DEF/HP, —Ä–∞—É–Ω–¥–∏, –∂–µ—Ä—Ç–≤–∏)  ‚Üê –§–ê–ó–ê 8
‚îÇ   ‚îú‚îÄ‚îÄ castleService.js   ‚Äî –ó–∞–º–∫–∏: 5 —Ä—ñ–≤–Ω—ñ–≤ √ó 4 –∫–ª–∞—Å–∏, –∞–ø–≥—Ä–µ–π–¥           ‚Üê –§–ê–ó–ê 8
‚îÇ   ‚îú‚îÄ‚îÄ config.js          ‚Äî –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è Firebase (–∑–º—ñ–Ω–Ω—ñ –∑ .env)
‚îÇ   ‚îú‚îÄ‚îÄ explorationService.js
‚îÇ   ‚îú‚îÄ‚îÄ missionService.js  ‚Äî –ú—ñ—Å—ñ—ó: 4 —Ç–∏–ø–∏, —Ç—Ä–µ–∫—ñ–Ω–≥ –ø—Ä–æ–≥—Ä–µ—Å—É, –Ω–∞–≥–æ—Ä–æ–¥–∏   ‚Üê –§–ê–ó–ê 8
‚îÇ   ‚îú‚îÄ‚îÄ productionService.js
‚îÇ   ‚îú‚îÄ‚îÄ ruinService.js     ‚Äî –†—É—ó–Ω–∏ 3 —Ç–∏—Ä—ñ–≤: –±—ñ–π, –ª—É—Ç, –∫—É–ª–¥–∞—É–Ω            ‚Üê –§–ê–ó–ê 8
‚îÇ   ‚îú‚îÄ‚îÄ scienceService.js
‚îÇ   ‚îú‚îÄ‚îÄ seasonService.js
‚îÇ   ‚îú‚îÄ‚îÄ service.js         ‚Äî –í–°–Ü –±–∞–∑–æ–≤—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó –∑ Firestore
‚îÇ   ‚îú‚îÄ‚îÄ surveyService.js   ‚Äî –û–ø–∏—Ç—É–≤–∞–Ω–Ω—è: —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è, –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ             ‚Üê –§–ê–ó–ê 8
‚îÇ   ‚îî‚îÄ‚îÄ unitService.js     ‚Äî 6 —é–Ω—ñ—Ç—ñ–≤: –Ω–∞–π–º, –∞–ø–≥—Ä–µ–π–¥, —Ñ–æ—Ä–º—É–≤–∞–Ω–Ω—è         ‚Üê –§–ê–ó–ê 8
‚îú‚îÄ‚îÄ pages/
‚îÇ   ‚îú‚îÄ‚îÄ Admin.jsx          ‚Äî –ê–¥–º—ñ–Ω–∫–∞ (approvals/tasks/stats/surveys)
‚îÇ   ‚îú‚îÄ‚îÄ City.jsx           ‚Äî –ì–û–õ–û–í–ù–ê: –æ–¥–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞ –∑ –≤–∫–ª–∞–¥–∫–∞–º–∏ (üèôÔ∏è/‚öîÔ∏è/üì¨) ‚Üê –§–ê–ó–ê 8
‚îÇ   ‚îú‚îÄ‚îÄ HeroCreate.jsx     ‚Äî –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
‚îÇ   ‚îú‚îÄ‚îÄ Landing.jsx        ‚Äî –í—Ö—ñ–¥/–ø–æ—à—É–∫ –≥—Ä–∞–≤—Ü—è
‚îÇ   ‚îú‚îÄ‚îÄ SurveyPage.jsx     ‚Äî –ü—Å–∏—Ö–æ–ª–æ–≥—ñ—á–Ω—ñ –æ–ø–∏—Ç—É–≤–∞–Ω–Ω—è                      ‚Üê –§–ê–ó–ê 8
‚îÇ   ‚îú‚îÄ‚îÄ Tasks.jsx          ‚Äî –ó–∞–≤–¥–∞–Ω–Ω—è (—Ç–µ–ø–µ—Ä –≤–±—É–¥–æ–≤–∞–Ω—ñ –≤ City)
‚îÇ   ‚îú‚îÄ‚îÄ Trade.jsx          ‚Äî –¢–æ—Ä–≥—ñ–≤–ª—è –º—ñ–∂ –≥—Ä–∞–≤—Ü—è–º–∏
‚îÇ   ‚îî‚îÄ‚îÄ WorldMap.jsx       ‚Äî –ö–∞—Ä—Ç–∞ —Ä–µ–≥—ñ–æ–Ω—É (10√ó10, —Ä—É—ó–Ω–∏, —Ä–µ–π—Ç–∏–Ω–≥)        ‚Üê –§–ê–ó–ê 8
‚îî‚îÄ‚îÄ store/
    ‚îî‚îÄ‚îÄ gameStore.js       ‚Äî Zustand store + –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∏ (GROUPS, HERO_CLASSES, RESOURCE_ICONS)
```

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–∏—Ö Firebase

### –ö–æ–ª–µ–∫—Ü—ñ—ó:
- `/players/{playerId}` ‚Äî –¥–∞–Ω—ñ –≥—Ä–∞–≤—Ü—ñ–≤ (`id = {group}_{timestamp}`)
- `/tasks/{taskId}` ‚Äî –∑–∞–≤–¥–∞–Ω–Ω—è (—Ç–µ—Å—Ç–∏ + –≤—ñ–¥–∫—Ä–∏—Ç—ñ)
- `/submissions/{id}` ‚Äî –∑–¥–∞—á—ñ –∑–∞–≤–¥–∞–Ω—å
- `/trades/{id}` ‚Äî —Ç–æ—Ä–≥–æ–≤—ñ –∑–∞–ø–∏—Ç–∏
- `/messages/{id}` ‚Äî –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –º—ñ–∂ –≥—Ä–∞–≤—Ü—è–º–∏
- `/config/buildings/buildings/{id}` ‚Äî –∫–æ–Ω—Ñ—ñ–≥ –±—É–¥—ñ–≤–µ–ª—å
- `/config/disciplines/disciplines/{id}` ‚Äî –∫–æ–Ω—Ñ—ñ–≥ –¥–∏—Å—Ü–∏–ø–ª—ñ–Ω
- `/surveys/{id}` ‚Äî –æ–ø–∏—Ç—É–≤–∞–Ω–Ω—è ‚Üê –§–ê–ó–ê 8
- `/surveyResponses/{id}` ‚Äî –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –Ω–∞ –æ–ø–∏—Ç—É–≤–∞–Ω–Ω—è ‚Üê –§–ê–ó–ê 8

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –≥—Ä–∞–≤—Ü—è (`/players/{id}`):
```js
{
  id: "PD11_1700000000000",
  name: "–Ü–≤–∞–Ω –ü–µ—Ç—Ä–µ–Ω–∫–æ",
  normalizedName: "—ñ–≤–∞–Ω –ø–µ—Ç—Ä–µ–Ω–∫–æ",
  group: "PD11",
  gender: "male",
  heroName: "–ó–∞–ª—ñ–∑–Ω–∏–π –ö—É–ª–∞–∫",
  heroClass: "guardian",   // guardian | archivist | detective | coordinator
  heroLevel: 1,
  heroXP: 0,
  heroStats: { intellect: 5, endurance: 8, charisma: 5 },
  resources: { gold: 200, wood: 100, stone: 50, crystals: 0, bits: 0, code: 0 },
  buildings: {
    server:   { level: 1, workers: 0 },
    lab:      { level: 0, workers: 0 },
    tower:    { level: 0, workers: 0 },
    archive:  { level: 0, workers: 0 },
    firewall: { level: 0, workers: 0 },
  },
  workers: { total: 5, placed: 0 },

  // ‚îÄ‚îÄ –§–∞–∑–∞ 7: –ü–æ–ª–µ –º—ñ—Å—Ç–∞ ‚îÄ‚îÄ
  buildingPositions: { server: 2, lab: null },
  resourceMap: { "3": "gold", "7": "bits" },  // 12 –ø—Ä–∏—Ö–æ–≤–∞–Ω–∏—Ö –∫–ª—ñ—Ç–∏–Ω–æ–∫
  cellStates: {
    "3": { status: "researching", startedAt: Timestamp, endsAt: Timestamp },
    "7": { status: "mine", resource: "bits", mineLevel: 1, lastCollected: Timestamp },
  },

  // ‚îÄ‚îÄ –§–∞–∑–∞ 8: –ó–∞–º–æ–∫ + –ê—Ä–º—ñ—è ‚îÄ‚îÄ
  castle: {
    level: 1,              // 1-5
  },
  units: {
    scout_drone: { count: 2, level: 1 },
    shield_bot:  { count: 1, level: 1 },
  },
  army: {
    formation: ["scout_drone", "shield_bot"],   // –¥–æ 5 —Å–ª–æ—Ç—ñ–≤
    power: 150,                                  // —Å—É–º–∞—Ä–Ω–∞ –±–æ–π–æ–≤–∞ –ø–æ—Ç—É–∂–Ω—ñ—Å—Ç—å
  },

  // ‚îÄ‚îÄ –§–∞–∑–∞ 8: –†—É—ó–Ω–∏ (–∫—É–ª–¥–∞—É–Ω–∏) ‚îÄ‚îÄ
  ruinCooldowns: {
    tier1: Timestamp,
    tier2: Timestamp,
    tier3: Timestamp,
  },

  cityPosition: { x: 3, y: 5 },
  lastWorkerReset: Timestamp,
  lastActive: Timestamp,
  createdAt: Timestamp,
}
```

---

## –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∏ –≥—Ä–∏

### –†–µ—Å—É—Ä—Å–∏ (`RESOURCE_ICONS` –≤ gameStore.js):
```js
gold:     { icon: 'ü™ô', name: '–ó–æ–ª–æ—Ç–æ',  color: '#ffd700' }
wood:     { icon: 'ü™µ', name: '–î–µ—Ä–µ–≤–∏–Ω–∞', color: '#8B4513' }
stone:    { icon: 'ü™®', name: '–ö–∞–º—ñ–Ω—å',   color: '#808080' }
crystals: { icon: 'üíé', name: '–ö—Ä–∏—Å—Ç–∞–ª–∏', color: '#00ffff' }
bits:     { icon: 'üíæ', name: '–ë—ñ—Ç–∏',     color: '#00aaff' }
code:     { icon: 'üîê', name: '–ö–æ–¥',      color: '#00ff88' }
```

### –ë—É–¥—ñ–≤–ª—ñ (5 —à—Ç—É–∫, –∫–æ–Ω—Ñ—ñ–≥ —É Firebase `/config/buildings/buildings/`):
| ID | –ù–∞–∑–≤–∞ | –Ü–∫–æ–Ω–∫–∞ | –í–∏—Ä–æ–±–ª—è—î | –°–∏–Ω–µ—Ä–≥—ñ—è (2+ —Ä–æ–±—ñ—Ç–Ω–∏–∫–∏) |
|---|---|---|---|---|
| server | –°–µ—Ä–≤–µ—Ä | üñ•Ô∏è | bits + gold | +5 bits |
| lab | –õ–∞–±–æ—Ä–∞—Ç–æ—Ä—ñ—è | üî¨ | bits + code | +3 code |
| tower | –í–µ–∂–∞ –∑–≤'—è–∑–∫—É | üì° | code + gold | +5 gold |
| archive | –°—Ö–æ–≤–∏—â–µ –¥–∞–Ω–∏—Ö | üóÑÔ∏è | bits + stone | +4 bits |
| firewall | –ë—Ä–∞–Ω–¥–º–∞—É–µ—Ä | üõ°Ô∏è | code + gold | +6 code |

### –ö–ª–∞—Å–∏ –≥–µ—Ä–æ—ó–≤ (`HERO_CLASSES`):
- guardian (üõ°Ô∏è) ‚Äî +3 –í–∏—Ç—Ä–∏–≤–∞–ª—ñ—Å—Ç—å
- archivist (üìã) ‚Äî +3 –Ü–Ω—Ç–µ–ª–µ–∫—Ç
- detective (üîç) ‚Äî +2 –Ü–Ω—Ç–µ–ª–µ–∫—Ç +1 –•–∞—Ä–∏–∑–º–∞
- coordinator (üó∫Ô∏è) ‚Äî +3 –•–∞—Ä–∏–∑–º–∞

### XP —Ä—ñ–≤–Ω—ñ: `[0, 100, 250, 450, 700, 1000]` (6 —Ä—ñ–≤–Ω—ñ–≤ –º–∞–∫—Å–∏–º—É–º)

---

## –§–∞–∑–∞ 8 ‚Äî –©–æ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ (–ø–æ—Ç–æ—á–Ω–∞)

### –ù–æ–≤—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏:

**`BattleScreen.jsx`** ‚Äî –µ–∫—Ä–∞–Ω –±–æ—é –ø—ñ—Å–ª—è –∞—Ç–∞–∫–∏ —Ä—É—ó–Ω–∏:
- –ü–æ–∫—Ä–æ–∫–æ–≤–æ –ø–æ–∫–∞–∑—É—î —Ä–∞—É–Ω–¥–∏ (–∫–æ–∂–Ω—ñ 800 –º—Å)
- –¢—Ä–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏: –ü–ï–†–ï–ú–û–ì–ê üèÜ / –ü–û–†–ê–ó–ö–ê üíÄ / –ù–Ü–ß–ò–Ø ‚öîÔ∏è
- –ü–æ–∫–∞–∑—É—î –ª—É—Ç, XP, –∂–µ—Ä—Ç–≤–∏, —é–Ω—ñ—Ç—ñ–≤ —â–æ –≤–∏–∂–∏–ª–∏

**`CastlePanel.jsx`** ‚Äî –ø–∞–Ω–µ–ª—å –∑–∞–º–∫—É –≤ City:
- –ù–∞–∑–≤–∞ –∑–∞–º–∫—É –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –∫–ª–∞—Å—É –≥–µ—Ä–æ—è (4√ó5 = 20 —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö –Ω–∞–∑–≤)
- –ë–æ–Ω—É—Å–∏: workersMax, defenseBoost, researchSpeed, tradeSlots, xpMultiplier (–∑–∞–ª–µ–∂–∞—Ç—å –≤—ñ–¥ –∫–ª–∞—Å—É)
- –ö–Ω–æ–ø–∫–∞ –∞–ø–≥—Ä–µ–π–¥—É –∑ –≤–∞—Ä—Ç—ñ—Å—Ç—é –≤ —Ä–µ—Å—É—Ä—Å–∞—Ö

**`UnitsPanel.jsx`** ‚Äî –ø–∞–Ω–µ–ª—å —é–Ω—ñ—Ç—ñ–≤ –≤ City:
- 2 –≤–∫–ª–∞–¥–∫–∏: –Æ–Ω—ñ—Ç–∏ | –ê—Ä–º—ñ—è
- –í–∫–ª–∞–¥–∫–∞ –Æ–Ω—ñ—Ç–∏: –Ω–∞–π–º, –¥–µ—Ç–∞–ª—ñ (ATK/DEF/HP, —Å–ø–µ—Ü–∑–¥—ñ–±–Ω—ñ—Å—Ç—å), –∞–ø–≥—Ä–µ–π–¥ (—Ä—ñ–≤–Ω—ñ 1-3)
- –í–∫–ª–∞–¥–∫–∞ –ê—Ä–º—ñ—è: —Ñ–æ—Ä–º—É–≤–∞–Ω–Ω—è (drag-and-drop —Å–ª–æ—Ç—ñ–≤), –ø–æ–∫–∞–∑ –±–æ–π–æ–≤–æ—ó –ø–æ—Ç—É–∂–Ω–æ—Å—Ç—ñ

**`MissionsPanel.jsx`** ‚Äî –ø–æ–≤–Ω–æ–µ–∫—Ä–∞–Ω–Ω–∞ –ø–∞–Ω–µ–ª—å –º—ñ—Å—ñ–π:
- 4 –≤–∫–ª–∞–¥–∫–∏: –©–æ–¥–µ–Ω–Ω—ñ / –¢–∏–∂–Ω–µ–≤—ñ / –°—é–∂–µ—Ç / –î–æ—Å—è–≥–Ω–µ–Ω–Ω—è
- –ü—Ä–æ–≥—Ä–µ—Å-–±–∞—Ä –¥–ª—è –∫–æ–∂–Ω–æ—ó –º—ñ—Å—ñ—ó
- –ö–Ω–æ–ø–∫–∞ "–ó–∞–±—Ä–∞—Ç–∏" –¥–ª—è –≤–∏–∫–æ–Ω–∞–Ω–∏—Ö –º—ñ—Å—ñ–π

### –ù–æ–≤—ñ Firebase-—Å–µ—Ä–≤—ñ—Å–∏:

**`castleService.js`** ‚Äî –∑–∞–º–∫–∏:
```js
CASTLE_UPGRADE_COSTS = { 2: { gold: 500, stone: 200 }, 3: {...}, 4: {...}, 5: {...} }
CASTLE_MAX_UNITS = { 1: 3, 2: 5, 3: 8, 4: 12, 5: 15 }
CASTLE_NAMES = { guardian: { 1: '–ë—É–Ω–∫–µ—Ä', ... }, archivist: {...}, ... }
CASTLE_BONUSES = { guardian: { 1: { workersMax: 1, ... }, ... }, ... }
async upgradeCastle(playerId)
```

**`unitService.js`** ‚Äî 6 —é–Ω—ñ—Ç—ñ–≤:
```js
UNITS = {
  scout_drone:   { type: 'dps',     baseHP: 30, baseATK: 25, baseDEF: 5,  special: '–ü–µ—Ä—à–∏–π —É–¥–∞—Ä' }
  shield_bot:    { type: 'tank',    baseHP: 80, baseATK: 8,  baseDEF: 30, special: '–ë–ª–æ–∫ –ø–µ—Ä—à–æ—ó –∞—Ç–∞–∫–∏' }
  hack_spider:   { type: 'dps',     baseHP: 25, baseATK: 35, baseDEF: 3,  special: '–Ü–≥–Ω–æ—Ä—É—î 50% DEF' }
  medic_unit:    { type: 'support', baseHP: 40, baseATK: 5,  baseDEF: 15, special: '–õ—ñ–∫—É—î -HP —Å–æ—é–∑–Ω–∏–∫–∞ +20/—Ä–∞—É–Ω–¥' }
  guardian_core: { type: 'tank',    ... }
  siege_mech:    { type: 'siege',   ..., special: '+50% –ø—Ä–æ—Ç–∏ —Ä—É—ó–Ω' }
}
async recruitUnit(playerId, unitId)
async upgradeUnit(playerId, unitId)
async setFormation(playerId, formation)  // formation: string[] (unitIds)
```

**`ruinService.js`** ‚Äî 3 —Ç–∏—Ä–∏ —Ä—É—ó–Ω:
```js
RUINS = {
  tier1: { icon:'üèöÔ∏è', cooldownHours: 12, enemyArmy:[...], lootTable:{...}, xpReward: 15 }
  tier2: { icon:'üèóÔ∏è', cooldownHours: 24, enemyArmy:[...], diamondChance: 0.10, xpReward: 35 }
  tier3: { icon:'üè∞', cooldownHours: 48, enemyArmy:[...], diamondChance: 0.25, xpReward: 80 }
}
// RUIN_TEMPLATES: –º–∞—Å–∏–≤ { tier, position:{x,y} } ‚Äî –ø–æ–∑–∏—Ü—ñ—ó –Ω–∞ –∫–∞—Ä—Ç—ñ 10√ó10
async attackRuin(playerId, tier)  // –ø–æ–≤–µ—Ä—Ç–∞—î battleData
```

**`battleService.js`** ‚Äî —Å–∏–º—É–ª—è—Ü—ñ—è:
```js
// –†–∞—É–Ω–¥–æ–≤–∞ —Å–∏–º—É–ª—è—Ü—ñ—è: ATK/DEF/HP, special abilities, —â–æ–± –∑—Ä–æ–±–∏—Ç–∏ 20 —Ä–∞—É–Ω–¥—ñ–≤ max
simulateBattle(attackers, defenders, heroClass)
// ‚Üí { result: 'win'|'lose'|'draw', rounds:[...], casualties, survivingAttackers }
async saveBattleResult(playerId, tier, result, loot, xpGain, casualties)
async applyCasualties(playerId, casualties)
```

**`missionService.js`** ‚Äî –º—ñ—Å—ñ—ó:
```js
MISSION_TYPES = { daily, weekly, story, achievement }
DEFAULT_DAILY_MISSIONS = [
  { id:'daily_collect_resources', objective:{ action:'collect_mine', count:1 }, reward:{gold:50} }
  { id:'daily_upgrade_building',  objective:{ action:'upgrade_building', count:1 }, reward:{gold:80} }
  { id:'daily_complete_task',     objective:{ action:'complete_task', count:1 }, reward:{gold:100} }
  { id:'daily_trade',             objective:{ action:'trade', count:1 }, reward:{gold:60} }
  ...
]
async initPlayerMissions(playerId)
subscribePlayerMissions(playerId, callback)
async updateMissionProgress(playerId, action)  // –≤–∏–∫–ª–∏–∫–∞—Ç–∏ –ø—ñ—Å–ª—è –∫–æ–∂–Ω–æ—ó –¥—ñ—ó
async claimMissionReward(playerId, missionId)
```

**`surveyService.js`** ‚Äî –æ–ø–∏—Ç—É–≤–∞–Ω–Ω—è:
```js
subscribeSurveys(group, callback)
subscribePlayerSurveyResponses(playerId, callback)
canTakeSurvey(playerId, surveyId, responses) ‚Üí boolean
async submitSurvey(playerId, surveyId, answers, survey)
// Admin:
async createSurvey({ group, title, questions[] })
async deactivateSurvey(surveyId)
async getSurveyResponses(surveyId)
```

### –ó–º—ñ–Ω–∏ City.jsx (—î–¥–∏–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞):

**–ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –≤–∫–ª–∞–¥–æ–∫:**
```jsx
NAV_ITEMS = [city, map, tasks, inbox, trade]
// –ö–ª—ñ–∫ –Ω–∞ tasks/inbox –Ω–µ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –Ω–∞ –æ–∫—Ä–µ–º—É —Å—Ç–æ—Ä—ñ–Ω–∫—É ‚Äî
// –∑–º—ñ–Ω—é—î activeTab –≤ City ‚Üí —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å inline Tasks/Inbox
```

**Collapsible —Å–µ–∫—Ü—ñ—ó** (–∑ localStorage):
- –°–µ–∫—Ü—ñ—ó: hero, production, workers, buildings, grid, castle, army
- DEFAULT_OPEN = ['hero', 'production', 'buildings', 'castle', 'army']

**Mission progress hooks** ‚Äî –ø—ñ—Å–ª—è –∫–æ–∂–Ω–æ—ó –¥—ñ—ó –≥—Ä–∞–≤—Ü—è:
```js
updateMissionProgress(playerId, 'collect_mine')
updateMissionProgress(playerId, 'upgrade_building')
updateMissionProgress(playerId, 'complete_task')
// —Ç–æ—â–æ
```

### –ó–º—ñ–Ω–∏ WorldMap.jsx:

**–†—É—ó–Ω–∏ –Ω–∞ –∫–∞—Ä—Ç—ñ** ‚Äî –≤—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å—Å—è —è–∫ –∫–ª—ñ—Ç–∏–Ω–∫–∏ `üèöÔ∏è/üèóÔ∏è/üè∞` –ø–æ–≤–µ—Ä—Ö –≥—Ä–∞–≤—Ü—ñ–≤ –∑–∞ —Ñ—ñ–∫—Å–æ–≤–∞–Ω–∏–º–∏ –ø–æ–∑–∏—Ü—ñ—è–º–∏ –∑ `RUIN_TEMPLATES`.

**RuinPanel** ‚Äî —Å–ª–∞–π–¥-–∞–ø –∑ –¥–µ—Ç–∞–ª—è–º–∏ —Ä—É—ó–Ω–∏:
- –®–∞–Ω—Å –ø–µ—Ä–µ–º–æ–≥–∏ (–ª–æ–≥—ñ—Å—Ç–∏—á–Ω–∞ –∫—Ä–∏–≤–∞ –≤—ñ–¥ ATK-—Ä–µ–π—Ç–∏–Ω–≥—É –≥—Ä–∞–≤—Ü—è vs —Ä—É—ó–Ω–∏):
  ```js
  chance = 100 / (1 + exp(-2.5 * (atkRating/defRating - 1)))
  // –∫–æ–ª—å–æ—Ä–∏: –∑–µ–ª–µ–Ω–∏–π (>60%), –∑–æ–ª–æ—Ç–∏–π (40-60%), —á–µ—Ä–≤–æ–Ω–∏–π (<40%)
  ```
- –õ—É—Ç (–¥—ñ–∞–ø–∞–∑–æ–Ω–∏), XP, –∫—É–ª–¥–∞—É–Ω

**BattleScreen** ‚Äî –º–æ–¥–∞–ª—å–Ω–∏–π –ø—ñ—Å–ª—è –∞—Ç–∞–∫–∏.

### –ó–º—ñ–Ω–∏ Admin.jsx:

–ù–æ–≤–∞ –≤–∫–ª–∞–¥–∫–∞ **Surveys** (–æ–ø–∏—Ç—É–≤–∞–Ω–Ω—è):
- –§–æ—Ä–º–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è (title + N –ø–∏—Ç–∞–Ω—å —Ç–∏–ø—É text/scale/choice)
- –°–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω–∏—Ö –æ–ø–∏—Ç—É–≤–∞–Ω—å
- –ö–Ω–æ–ø–∫–∞ –¥–µ–∞–∫—Ç–∏–≤–∞—Ü—ñ—ó
- –ü–µ—Ä–µ–≥–ª—è–¥ –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π –ø–æ –≥—Ä–∞–≤—Ü—è—Ö

---

## –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ —Ñ–∞–∑–∏

- ‚úÖ **–§–∞–∑–∞ 1:** Landing, HeroCreate, Firebase init, City (–±–∞–∑–æ–≤–∞), Admin, –≤—Å—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏
- ‚úÖ **–§–∞–∑–∞ 2:** –í–∏—Ä–æ–±–Ω–∏—Ü—Ç–≤–æ —Ä–µ—Å—É—Ä—Å—ñ–≤ + –∞–ø–≥—Ä–µ–π–¥–∏ + WorkerResetTimer
- ‚úÖ **–§–∞–∑–∞ 3:** –ó–∞–≤–¥–∞–Ω–Ω—è (—Ç–µ—Å—Ç–∏ + –≤—ñ–¥–∫—Ä–∏—Ç—ñ), CompletionCard, Admin ApprovalsTab/TasksTab
- ‚úÖ **–§–∞–∑–∞ 4:** Trade (cancel/per-card loading), Inbox (mark all read)
- ‚úÖ **–§–∞–∑–∞ 5:** WorldMap leaderboard, unread badge global, HeroCreate stat allocation
- ‚úÖ **–§–∞–∑–∞ 6:** Tasks filter tabs, City level-up modal, Admin StatsTab, BuildingCard next-level preview
- ‚úÖ **–§–∞–∑–∞ 7:** –ü–æ–ª–µ –º—ñ—Å—Ç–∞ (MiningGrid) ‚Äî –±—É–¥—ñ–≤–ª—ñ + –¥–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è + –∫–æ–ø–∞–ª—å–Ω—ñ
- ‚úÖ **–§–∞–∑–∞ 8:** –ó–∞–º–æ–∫, –ê—Ä–º—ñ—è (6 —é–Ω—ñ—Ç—ñ–≤), –†—É—ó–Ω–∏, –ë—ñ–π, –ú—ñ—Å—ñ—ó, –û–ø–∏—Ç—É–≤–∞–Ω–Ω—è, City single-page –∑ –≤–∫–ª–∞–¥–∫–∞–º–∏
- ‚úÖ **–§–∞–∑–∞ 9:** –°–∏—Å—Ç–µ–º–∞ –ø–æ–ª—ñ–≤ (31 –ø–æ–ª–µ –Ω–∞ –≥—Ä—É–ø—É), –∑–∞—Ö–æ–ø–ª–µ–Ω–Ω—è, –¥–æ—Ö–æ–¥–∏, —Ä–µ–π—Ç–∏–Ω–≥ –ø–æ–ª—ñ–≤
- ‚úÖ **–§–∞–∑–∞ 10:** –õ–∞–±–æ—Ä–∞—Ç–æ—Ä—ñ—ó (expeditionService), –¥–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è –ø–æ–ª—ñ–≤, –±–æ–Ω—É—Å–∏
- ‚úÖ **–§–∞–∑–∞ 11:** Tech Tree (scienceService) + –ú—ñ—Å—ñ—ó (missionService) —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è
- ‚úÖ **–§–∞–∑–∞ 12:** –í—ñ–∑—É–∞–ª—å–Ω–∏–π polish ‚Äî –∞–Ω—ñ–º–∞—Ü—ñ—ó, glassmorphism, tile-based WorldMap

---

## –ù–û–í–ò–ô –ü–õ–ê–ù: –§–∞–∑–∏ 13‚Äì15 (–í—ñ–∑—É–∞–ª—å–Ω–∏–π —Ä–µ–¥–∏–∑–∞–π–Ω)

### –ö–æ–Ω—Ü–µ–ø—Ü—ñ—è
–ü–µ—Ä–µ—Ö—ñ–¥ –≤—ñ–¥ –∫–∞—Ä—Ç–∫–æ–≤–æ–≥–æ UI –¥–æ **–ø–æ–≤–Ω–æ—Ü—ñ–Ω–Ω–æ–≥–æ —ñ–≥—Ä–æ–≤–æ–≥–æ –≤–∏–≥–ª—è–¥—É** —É —Å—Ç–∏–ª—ñ –±—Ä–∞—É–∑–µ—Ä–Ω–∏—Ö RTS (MyLands / Legends).
- –°—Ç–∏–ª—å –º—ñ—Å—Ç–∞: **–ø–æ—Å—Ç-–∞–ø–æ–∫–∞–ª—ñ–ø—Ç–∏—á–Ω–∏–π** (—Ç–µ–º–Ω–∏–π, –±–µ—Ç–æ–Ω, —Ä—É—ó–Ω–∏)
- –°—Ç–∏–ª—å –∫–∞—Ä—Ç–∏: **–ª—ñ—Å + —Ä—ñ—á–∫–∏** (–∑–µ–ª–µ–Ω–∏–π, –ø—Ä–∏—Ä–æ–¥–Ω–∏–π)
- –ë—É–¥—ñ–≤–ª—ñ: –ø–æ—Ç–æ—á–Ω–∏–π –Ω–∞–±—ñ—Ä (server, lab, tower, archive, firewall + castle)
- –ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è: –≥–µ–Ω–µ—Ä—É—é—Ç—å—Å—è –ø–æ –∑–∞–ø–∏—Ç—É (–∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –≥–µ–Ω–µ—Ä—É—î)

---

### –§–∞–∑–∞ 13 ‚Äî Visual City Grid (–í—ñ–∑—É–∞–ª—å–Ω–µ –º—ñ—Å—Ç–æ)

**–ú–µ—Ç–∞:** –ó–∞–º—ñ–Ω–∏—Ç–∏ —Å–ø–∏—Å–æ–∫ –∫–∞—Ä—Ç–æ–∫ –±—É–¥—ñ–≤–µ–ª—å –Ω–∞ **—ñ–∑–æ–º–µ—Ç—Ä–∏—á–Ω—É/top-down —Å—ñ—Ç–∫—É** –º—ñ—Å—Ç–∞.

**–©–æ –±—É–¥–µ:**
- –°—ñ—Ç–∫–∞ 8√ó8 –∫–ª—ñ—Ç–∏–Ω–æ–∫ —É `City.jsx` (–∞–±–æ –æ–∫—Ä–µ–º–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `CityGrid.jsx`)
- CSS-—Ñ–æ–Ω: —Ç–µ–º–Ω–∏–π –±–µ—Ç–æ–Ω + —Ç—Ä–∞–≤–∞ (–ø–æ—Å—Ç-–∞–ø–æ–∫ —Å—Ç–∏–ª—å), –ø–∞—Ä–∫–∞–Ω –Ω–∞–≤–∫–æ–ª–æ –º—ñ—Å—Ç–∞
- –ë—É–¥—ñ–≤–ª—ñ —è–∫ **–≤–µ–ª–∏–∫—ñ emoji-—Å–ø—Ä–∞–π—Ç–∏** (48‚Äì64px) + —Ä—ñ–≤–µ–Ω—å-–±–µ–π–¥–∂ + —Å—Ç–∞—Ç—É—Å —Ä–æ–±—ñ—Ç–Ω–∏–∫—ñ–≤
- –Ø–∫—â–æ —î `building.png` –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è ‚Üí –ø–æ–∫–∞–∑—É–≤–∞—Ç–∏ –π–æ–≥–æ –∑–∞–º—ñ—Å—Ç—å emoji
- –ü–æ—Ä–æ–∂–Ω—ñ –∫–ª—ñ—Ç–∏–Ω–∫–∏: —Ç–µ–º–Ω–∞ —Å—ñ—Ç–∫–∞ –∑ –µ—Ñ–µ–∫—Ç–æ–º "–±—É–¥—É–≤–∞—Ç–∏ —Ç—É—Ç"
- –ö–ª—ñ–∫ –Ω–∞ –±—É–¥—ñ–≤–ª—é ‚Üí floating card (–∞–ø–≥—Ä–µ–π–¥ / –≤–æ—Ä–∫–µ—Ä–∏ / —ñ–Ω—Ñ–æ), –±–µ–∑ –Ω–∞–≤—ñ–≥–∞—Ü—ñ—ó
- –§—ñ–∫—Å–æ–≤–∞–Ω—ñ –ø–æ–∑–∏—Ü—ñ—ó –±—É–¥—ñ–≤–µ–ª—å –Ω–∞ —Å—ñ—Ç—Ü—ñ:
  ```
  castle   ‚Üí —Ü–µ–Ω—Ç—Ä (3,3) + (3,4) + (4,3) + (4,4) (2√ó2)
  server   ‚Üí (1,1)
  lab      ‚Üí (6,1)
  tower    ‚Üí (1,6)
  archive  ‚Üí (6,6)
  firewall ‚Üí (1,3)
  ```
- –í–µ—Ä—Ö–Ω—ñ–π HUD: —Ä–µ—Å—É—Ä—Å–∏ + –≥–µ—Ä–æ–π (—è–∫ –∑–∞—Ä–∞–∑)
- –ù–∏–∂–Ω—è –Ω–∞–≤—ñ–≥–∞—Ü—ñ–π–Ω–∞ –ø–∞–Ω–µ–ª—å (—è–∫ –∑–∞—Ä–∞–∑)

**–§–∞–π–ª–∏ –¥–ª—è –∑–º—ñ–Ω–∏:**
- `src/pages/City.jsx` ‚Äî –∑–∞–º—ñ–Ω–∏—Ç–∏ —Å–µ–∫—Ü—ñ—é –±—É–¥—ñ–≤–µ–ª—å –Ω–∞ `<CityGrid />`
- `src/components/CityGrid.jsx` ‚Äî –ù–û–í–ò–ô —Ñ–∞–π–ª (—Å—ñ—Ç–∫–∞)

---

### –§–∞–∑–∞ 14 ‚Äî Visual World Map (–ö–∞—Ä—Ç–∞-—Ç–µ—Ä–µ–Ω)

**–ú–µ—Ç–∞:** –ó–∞–º—ñ–Ω–∏—Ç–∏ tile-—Å—ñ—Ç–∫—É –Ω–∞ **—Å–∫—Ä–æ–ª–∞–±–µ–ª—å–Ω—É –∫–∞—Ä—Ç—É –∑ —Ç–µ—Ä–µ–π–Ω–æ–º** (–ª—ñ—Å + —Ä—ñ—á–∫–∏).

**–©–æ –±—É–¥–µ:**
- –ü–æ–≤–Ω–æ–µ–∫—Ä–∞–Ω–Ω–∏–π `<div>` –∑ CSS-—Ç–µ—Ä–µ–π–Ω–æ–º: –∑–µ–ª–µ–Ω–∏–π –ª—ñ—Å + —Å–∏–Ω—ñ —Ä—ñ—á–∫–∏ (SVG –∞–±–æ CSS –≥—Ä–∞–¥—ñ—î–Ω—Ç–∏)
- 31 –ø–æ–ª–µ ‚Äî –ø–æ–∑–∏—Ü—ñ–æ–Ω–æ–≤–∞–Ω—ñ –º–∞—Ä–∫–µ—Ä–∏ –∑ **—Ñ—ñ–∫—Å–æ–≤–∞–Ω–∏–º–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏** (x%, y%) –≤ –º–µ–∂–∞—Ö –∫–∞—Ä—Ç–∏
- –ö–æ–∂–µ–Ω –º–∞—Ä–∫–µ—Ä: –≤–µ–ª–∏–∫–∞ —ñ–∫–æ–Ω–∫–∞ —Ç–∏–ø—É –ø–æ–ª—è, –Ω–∞–∑–≤–∞, –≤–ª–∞—Å–Ω–∏–∫ (—è–∫—â–æ —î)
- –°–∫—Ä–æ–ª/pan –Ω–∞ –º–æ–±—ñ–ª—ñ (touch events –∞–±–æ CSS overflow)
- –ú—ñ—Å—Ç–æ –≥—Ä–∞–≤—Ü—è ‚Äî –≤–∏–¥—ñ–ª–µ–Ω–µ –º—ñ—Å—å–∫–µ –º—ñ—Å—Ü–µ –Ω–∞ –∫–∞—Ä—Ç—ñ
- –ú—ñ—Å—Ç–∞ —ñ–Ω—à–∏—Ö –≥—Ä–∞–≤—Ü—ñ–≤ –≥—Ä—É–ø–∏ ‚Äî –º–µ–Ω—à—ñ –º–∞—Ä–∫–µ—Ä–∏
- –ü—Ä–∏ –∫–ª—ñ–∫—É –Ω–∞ –ø–æ–ª–µ ‚Üí existing FieldPanel (–≤–∂–µ —î)
- –õ–µ–≥–µ–Ω–¥–∞ —Ç–∏–ø—ñ–≤ –ø–æ–ª—ñ–≤ —É –∫—É—Ç—ñ

**–§–∞–π–ª–∏ –¥–ª—è –∑–º—ñ–Ω–∏:**
- `src/pages/WorldMap.jsx` ‚Äî –ø–æ–≤–Ω–∏–π —Ä–µ–¥–∏–∑–∞–π–Ω

---

### –§–∞–∑–∞ 15 ‚Äî –§—ñ–Ω–∞–ª—å–Ω–∏–π polish + Launch

- –ê–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—å: —Ç–∞–±–ª–∏—Ü—è –≥—Ä–∞–≤—Ü—ñ–≤ –∑ –ø—Ä–æ–≥—Ä–µ—Å–æ–º, CSV-export
- Season 1 balance check
- Performance –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è (lazy loading, code splitting)
- Firebase indexes review

---

## –ü–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω: —â–æ —â–µ –ù–ï –∑—Ä–æ–±–ª–µ–Ω–æ / –º–æ–∂–ª–∏–≤—ñ –Ω–∞–ø—Ä—è–º–∏

- **–ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è** –¥–ª—è –±—É–¥—ñ–≤–µ–ª—å, –∑–∞–º–∫—ñ–≤, —é–Ω—ñ—Ç—ñ–≤ ‚Äî –º–æ–∂–Ω–∞ –≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –ø–æ –∑–∞–ø–∏—Ç—É
- **–õ—ñ–º—ñ—Ç –¥–æ—Å–ª—ñ–¥–∂–µ–Ω—å –æ–¥–Ω–æ—á–∞—Å–Ω–æ** (Lab —Ä—ñ–≤.1 ‚Üí 1, –†—ñ–≤.2 ‚Üí 2, –†—ñ–≤.3 ‚Üí 3)
- **PvP** ‚Äî –≥—Ä–∞–≤–µ—Ü—å –ø—Ä–æ—Ç–∏ –≥—Ä–∞–≤—Ü—è —á–µ—Ä–µ–∑ WorldMap
- **–ù–æ—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó** ‚Äî push –∞–±–æ in-app
- **Admin**: Firebase offline error fix (done –≤ fix-firebase-offline-error branch)

---

## –ö–ª—é—á–æ–≤—ñ –ø–∞—Ç–µ—Ä–Ω–∏ –∫–æ–¥–æ–≤–æ—ó –±–∞–∑–∏

### –û–Ω–æ–≤–ª–µ–Ω–Ω—è Firebase (—á–µ—Ä–µ–∑ dot notation):
```js
await updateDoc(playerRef, {
  [`buildings.${buildingId}.workers`]: newCount,
  [`cellStates.${cellIndex}.lastCollected`]: new Date(),
  lastActive: serverTimestamp(),
})
```

### –¢—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó (–¥–ª—è –∞—Ç–æ–º–∞—Ä–Ω–∏—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π):
```js
await runTransaction(db, async (tx) => {
  const snap = await tx.get(playerRef)
  const player = snap.data()
  // –≤–∞–ª—ñ–¥–∞—Ü—ñ—è...
  tx.update(playerRef, { ... })
})
```

### –ü—ñ–¥–ø–∏—Å–∫–∏ (—Ä–µ–∞–ª—å–Ω–∏–π —á–∞—Å):
```js
const unsub = subscribePlayer(playerId, (data) => setPlayer(data))
// cleanup –≤ useEffect return
```

### –°–ª–∞–π–¥-–∞–ø –ø–∞–Ω–µ–ª—ñ (CSS –∞–Ω—ñ–º–∞—Ü—ñ—è):
```jsx
<div className="fixed bottom-[56px] left-0 right-0 z-40 animate-slide-up">
  ...
</div>
```

### Feedback (success/error –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —É City):
```js
showFeedback('success', '–¢–µ–∫—Å—Ç –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è')
showFeedback('error', err.message)
```

---

## –î–ª—è —à–≤–∏–¥–∫–æ–≥–æ —Å—Ç–∞—Ä—Ç—É –≤ –Ω–æ–≤–æ–º—É —á–∞—Ç—ñ

–°–∫–∞–∂–∏ Claude:
> "–Ø —Ä–æ–∑—Ä–æ–±–ª—è—é –Ω–∞–≤—á–∞–ª—å–Ω—É –≥—Ä—É Eduland –Ω–∞ React + Firebase. –ü—Ä–æ—á–∏—Ç–∞–π —Ñ–∞–π–ª CONTEXT_FOR_CLAUDE.md —É –∫–æ—Ä–µ–Ω—ñ –ø—Ä–æ—î–∫—Ç—É ‚Äî —Ç–∞–º –ø–æ–≤–Ω–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø—Ä–æ—î–∫—Ç—É, —â–æ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ —ñ —â–æ —è —Ö–æ—á—É –∑—Ä–æ–±–∏—Ç–∏ –¥–∞–ª—ñ. –î–∞–≤–∞–π –ø—Ä–æ–¥–æ–≤–∂–∏–º–æ –∑ [–∫–æ–Ω–∫—Ä–µ—Ç–Ω–∞ –∑–∞–¥–∞—á–∞]."
